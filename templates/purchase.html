<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <title>Pagamentos - Ponza Health</title>
  <link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Funnel+Sans:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/ponza-base.css') }}">

  <style>
    a,
    a:hover,
    a:focus {
      text-decoration: none;
    }

    .sidebar a.menu-item,
    .sidebar .label {
      font-size: 16px;
    }

    .plan-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .plan-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 18px 16px;
      box-shadow: var(--shadow);
      text-align: center;
      transition: 0.2s;
    }

    .plan-card:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-strong);
    }

    .plan-card h4 {
      margin: 0 0 6px;
      font-size: 18px;
      color: var(--ink);
      font-weight: 800;
    }

    .plan-card p {
      margin: 0 0 10px;
      color: var(--ink-dim);
      font-size: 14px;
    }

    .plan-card .price {
      font-size: 22px;
      font-weight: 800;
      color: var(--brand-solid);
      margin: 6px 0;
    }

    .plan-card small {
      color: var(--ink-dim);
      font-size: 12px;
    }

    .plan-card .savings-pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 6px 16px;
      border-radius: 999px;
      background: linear-gradient(135deg, #16a34a 0%, #22c55e 100%);
      color: #fff;
      font-weight: 700;
      font-size: 13px;
      letter-spacing: 0.02em;
      margin: 6px auto 8px;
      box-shadow: 0 8px 18px rgba(22, 163, 74, 0.22);
    }

    .plan-card .savings-note {
      font-size: 13px;
      color: #166534;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .section-title {
      margin-top: 0;
      text-align: center;
      font-size: 20px;
      font-weight: 700;
    }

    .section-divider {
      margin: 40px 0;
      border: none;
      border-top: 1px solid var(--border);
    }
  </style>
</head>

<body>
  <!-- Topo -->
  <div class="top-profile">
    <a href="{{ url_for('account') }}" class="icon-btn"><i class="fa fa-user"></i></a>
    <button class="icon-btn"><i class="fa fa-bell"></i><span class="badge">{{ (notifications_unread or 0)
        }}</span></button>
  </div>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <button class="sidebar-toggle" onclick="toggleSidebar()"><i class="fa fa-angle-double-left"></i></button>
    <img src="{{ url_for('static', filename='images/3.svg') }}" class="sidebar-logo" alt="Ponza Health" />
    <a href="{{ url_for('index') }}" class="menu-item"><i class="fa fa-home"></i><span class="label">Início</span></a>
    <a href="{{ url_for('upload') }}" class="menu-item"><i class="fa fa-upload"></i><span class="label">Ponza
        Lab</span></a>
    <a href="{{ url_for('quote_index') }}" class="menu-item"><i class="fa fa-file-text-o"></i><span
        class="label">Cotações</span></a>
    <a href="{{ url_for('catalog') }}" class="menu-item"><i class="fa fa-users"></i><span
        class="label">Pacientes</span></a>
    <a href="{{ url_for('products') }}" class="menu-item"><i class="fa fa-archive"></i><span
        class="label">Estoque</span></a>
    <a href="{{ url_for('agenda') }}" class="menu-item"><i class="fa fa-calendar"></i><span
        class="label">Agenda</span></a>
    <a href="{{ url_for('payments') }}" class="menu-item active"><i class="fa fa-credit-card"></i><span
        class="label">Pagamentos</span></a>
    <div class="sidebar-spacer"></div>
    <a href="{{ url_for('logout') }}" class="menu-item logout"><i class="fa fa-sign-out"></i><span
        class="label">Sair</span></a>
  </div>

  <!-- Conteúdo -->
  <div class="content">
    <h2>Pagamentos</h2>

    {% if request.args.get('message') == 'pacote' %}
    <div class="alert">Seu pacote de análises acabou. Por favor, adquira mais para continuar usando o Ponza Lab.</div>
    {% endif %}

    <!-- Planos de assinatura -->
    <div class="panel">
      <h3 class="section-title">Planos de Assinatura</h3>
      <p style="color:var(--ink-dim); font-size:16px; text-align:center;">
        Escolha o plano ideal para sua clínica e mantenha acesso completo ao sistema.
      </p>

      <div class="plan-cards">
        <!-- Plano Mensal -->
        <div class="plan-card">
          <h4>Plano Mensal</h4>
          <p>Flexibilidade total para clínicas que desejam testar e crescer com liberdade.</p>
          <div class="price">R$ 79,90</div>
          <small>Renovação automática mensal</small>
          <div class="purchase-actions" style="margin-top:16px;">
            <a href="{{ url_for('subscribe_pay_mensal') }}" class="btn" target="_blank">Assinar Plano Mensal</a>
          </div>
        </div>

        <!-- Plano Anual -->
        <div class="plan-card">
          <h4>Plano Anual</h4>
          <p>Economize R$ 120/ano e mantenha acesso por 12 meses.</p>
          <div class="savings-pill">Economize 12,5%</div>
          <p class="savings-note">Assine uma vez por ano e poupe R$ 120 em relação ao plano mensal.</p>
          <div class="price">R$ 838,80</div>
          <small>Equivalente a R$ 69,90/mês</small>
          <div class="purchase-actions" style="margin-top:16px;">
            <a href="{{ url_for('subscribe_pay_anual') }}" class="btn" target="_blank">Assinar Plano Anual</a>
          </div>
        </div>
      </div>
    </div>

    <hr class="section-divider">

    <!-- Pacotes de análises -->
    <div class="panel">
      <h3 class="section-title">Pacotes de Análises</h3>
      <p style="color:var(--ink-dim); font-size:15px; text-align:center; margin-bottom:20px;">
        Adquira pacotes adicionais conforme a necessidade da sua clínica.
      </p>

      <div class="plan-cards">
        <div class="plan-card">
          <h4>Pacote 50 Análises</h4>
          <p>Ideal para clínicas pequenas.</p>
          <div class="price">R$ 120</div>
          <div class="purchase-actions" style="margin-top:16px;">
            <a href="{{ url_for('purchase_package', package=50) }}" class="btn" target="_blank">Comprar 50 análises</a>
          </div>
        </div>

        <div class="plan-card">
          <h4>Pacote 150 Análises</h4>
          <p>Perfeito para uso regular em média escala.</p>
          <div class="price">R$ 300</div>
          <div class="purchase-actions" style="margin-top:16px;">
            <a href="{{ url_for('purchase_package', package=150) }}" class="btn" target="_blank">Comprar 150
              análises</a>
          </div>
        </div>

        <div class="plan-card">
          <h4>Pacote 500 Análises</h4>
          <p>Melhor custo-benefício para clínicas grandes.</p>
          <div class="price">R$ 950</div>
          <div class="purchase-actions" style="margin-top:16px;">
            <a href="{{ url_for('purchase_package', package=500) }}" class="btn" target="_blank">Comprar 500
              análises</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    function toggleSidebar() {
      const s = document.getElementById('sidebar');
      s.classList.toggle('is-collapsed');
      localStorage.setItem('sidebarCollapsed', s.classList.contains('is-collapsed') ? '1' : '0');
    }
    document.addEventListener('DOMContentLoaded', () => {
      if (localStorage.getItem('sidebarCollapsed') === '1') {
        document.getElementById('sidebar')?.classList.add('is-collapsed');
      }
    });
  </script>
</body>

</html>